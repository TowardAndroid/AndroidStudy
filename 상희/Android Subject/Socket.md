# π’΅ Socket

# β… Socket
## Socket
λ„¤νΈμ›ν¬ μ†μΌ“(Network Socket)μ€ λ„¤νΈμ›ν¬λ¥Ό κ²½μ ν•λ” ν”„λ΅μ„Έμ¤ κ°„ ν†µμ‹ μ μΆ…μ°©μ μ΄λ‹¤.  
OSI 7 κ³„μΈµ μ¤‘ μ‘μ© κ³„μΈµμ— μ†ν•λ” ν”„λ΅μ„Έμ¤λ“¤μ€ λ°μ΄ν„° μ†΅μμ‹ μ„ μ„ν•΄ λ°λ“μ‹ μ†μΌ“μ„ κ±°μ³ μ „μ†΅ κ³„μΈµμΌλ΅ λ°μ΄ν„°λ¥Ό μ „λ‹¬ν•΄μ•Ό ν•λ‹¤.  
μ¦‰, μ†μΌ“μ€ μ „μ†΅ κ³„μΈµκ³Ό μ‘μ© ν”„λ΅κ·Έλ¨ μ‚¬μ΄μ μΈν„°νμ΄μ¤ μ—­ν• μ„ ν•λ©° λ–¨μ–΄μ Έ μλ” λ‘ νΈμ¤νΈλ¥Ό μ—°κ²°ν•΄ μ¤€λ‹¤.

<br/>

![Untitled](https://velog.velcdn.com/images/newdana01/post/9b90db1e-11f4-4d17-b8f6-331402801d46/image.png)

<br/>

μ†μΌ“μ€ μ•„λμ 3 κ°€μ§€ μ”μ†λ΅ μ •μλλ‹¤.  
- ν”„λ΅ν† μ½    
    : ν”„λ΅ν† μ½μ€ μ›λ μ™Έκµμƒμ μ–Έμ–΄λ΅μ¨ μλ΅€λ‚ κµ­κ°€ κ°„μ μ•½μ†μ„ μλ―Έν•λ©° ν†µμ‹ μ—μ„λ” μ–΄λ–¤ μ‹μ¤ν…μ΄ λ‹¤λ¥Έ μ‹μ¤ν…κ³Ό ν†µμ‹ μ„ μ›ν™ν•κ² μμ©ν•λ„λ΅ ν•΄ μ£Όλ” ν†µμ‹  κ·μ•½, μ•½μ†μ„ μλ―Έν•λ‹¤.    
- IP    
    : μ „ μ„Έκ³„ μ»΄ν“¨ν„°μ— λ¶€μ—¬λ κ³ μ μ μ‹λ³„ μ£Όμ†λ¥Ό μλ―Έν•λ‹¤.    
- Port    
    : ν¬νΈ(Port)λ” λ„¤νΈμ›ν¬ μƒμ—μ„ ν†µμ‹ ν•κΈ° μ„ν•΄μ„ νΈμ¤νΈ λ‚΄λ¶€μ μΌλ΅ ν”„λ΅μ„Έμ¤κ°€ ν• λ‹Ήλ°›μ•„μ•Ό ν•λ” κ³ μ ν• μ«μμ΄λ‹¤. ν• νΈμ¤νΈ λ‚΄μ—μ„ λ„¤νΈμ›ν¬ ν†µμ‹ μ„ ν•κ³  μλ” ν”„λ΅μ„Έμ¤λ¥Ό μ‹λ³„ν•κΈ° μ„ν•΄ μ‚¬μ©λλ” κ°’μ΄λ―€λ΅ κ°™μ€ νΈμ¤νΈ λ‚΄μ—μ„ μ„λ΅ λ‹¤λ¥Έ ν”„λ΅μ„Έμ¤κ°€ κ°™μ€ ν¬νΈ λ„λ²„λ¥Ό κ°€μ§ μ μ—†λ‹¤. μ¦‰, κ°™μ€ μ»΄ν“¨ν„° λ‚΄μ—μ„ ν”„λ΅κ·Έλ¨μ„ μ‹λ³„ν•λ” λ²νΈμ΄λ‹¤.
    
<br/>

## Socket ν†µμ‹ 
μΌλ°μ μΌλ΅ μ„λ²„λ” νΉμ • ν¬νΈκ°€ λ°”μΈλ”©λ μ†μΌ“λ¥Ό κ°€μ§€κ³  νΉμ • μ»΄ν“¨ν„° μ„μ—μ„ λμ•„κ°„λ‹¤. ν•΄λ‹Ή μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μ—°κ²° μ”μ²­μ„ μ†μΌ“μ„ ν†µν•΄ λ¦¬μ¤λ‹ν•λ©΄μ„ κ·Έλƒ¥ κΈ°λ‹¤λ¦΄ λΏμ΄λ‹¤.  
ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„κ°€ λ–  μλ” λ¨Έμ‹ μ νΈμ¤νΈ λ„¤μ„κ³Ό μ„λ²„κ°€ λ¦¬μ¤λ‹ν•κ³  μλ” ν¬νΈ λ²νΈλ¥Ό μ•κ³  μλ‹¤.  
λ”°λΌμ„ ν΄λΌμ΄μ–ΈνΈλ” μ΄ νΈμ¤νΈ λ„¤μ„κ³Ό ν¬νΈλ¥Ό ν†µν•΄μ„ μ„λ²„μ™€ μ—°κ²°μ„ μ‹λ„ν•κ² λλ‹¤.  
λν• ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„ μƒλ€λ΅ μμ‹ μ„ μ‹λ³„μ‹μΌ μ£ΌκΈ° μ„ν•΄μ„ μ—°κ²° λ™μ• μ‚¬μ©λ  λ΅μ»¬ ν¬νΈμ— λ°”μΈλ”©λλ‹¤. μ΄ ν¬νΈ λ°”μΈλ”© μ‘μ—…μ€ λ³΄ν†µ μ‹μ¤ν…μ— μν•΄μ„ μ΄λ¤„μ§„λ‹¤.

<br/>

![Untitled](https://docs.oracle.com/javase/tutorial/figures/networking/5connect.gif)

<br/>

λ§μ•½μ— λ¨λ“  κ² μμ΅°λ΅­κ² μ΄λ¤„μ§„λ‹¤λ©΄ μ„λ²„λ” μ—°κ²°μ„ μλ½ν•κ² λλ‹¤.  
μλ½ν•μλ§μ μ„λ²„λ” λ™μΌν• λ΅μ»¬ ν¬νΈμ— λ°”μΈλ”©λ μƒλ΅μ΄ μ†μΌ“μ„ μ–»κ² λλ©° ν΄λΌμ΄μ–ΈνΈμ μ£Όμ†μ™€ ν¬νΈλ΅ μ„Έν…λ λ¦¬λ¨νΈ μ—”λ“ ν¬μΈνΈλ¥Ό κ°€μ§€κ² λλ‹¤.  
μ„λ²„κ°€ λ³„κ°μ μƒλ΅μ΄ μ†μΌ“μ΄ ν•„μ”ν• μ΄μ λ” μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ μ²λ¦¬ν•λ©΄μ„ λ™μ‹μ— κΈ°μ΅΄μ μ†μΌ“μ„ ν†µν•΄μ„λ” μ§€μ†μ μΌλ΅ μ—°κ²° μ”μ²­μ„ λ°›μ•„μ•Ό ν•κΈ° λ•λ¬Έμ΄λ‹¤.

<br/>

![Untitled](https://docs.oracle.com/javase/tutorial/figures/networking/6connect.gif)

<br/>

ν΄λΌμ΄μ–ΈνΈ μ…μ¥μ—μ„λ” λ§μ•½μ— μ—°κ²°μ΄ μλ½λλ©΄ μ†μΌ“μ€ μ„±κ³µμ μΌλ΅ μƒμ„±λλ©° ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ™€ ν†µμ‹ ν•κΈ° μ„ν•΄μ„ μ†μΌ“μ„ μ‚¬μ©ν•  μ μκ² λλ‹¤.  
ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” μ΄μ  μ†μΌ“μ— λ°μ΄ν„°λ¥Ό μ“°κ±°λ‚ μ½μμΌλ΅μ¨ ν†µμ‹ ν•  μκ°€ μκ² λλ‹¤.

<br/>

### Socket
μ†μΌ“μ€ λ„¤νΈμ›ν¬ μƒμ—μ„ λμ•„κ°€λ” λ‘ κ°μ ν”„λ΅κ·Έλ¨ κ°„ μ–‘λ°©ν–¥ ν†µμ‹ μ ν•λ‚μ μ—”λ“ ν¬μΈνΈμ΄λ‹¤.  
μ†μΌ“μ€ ν¬νΈ λ²νΈμ— λ°”μΈλ”©λμ–΄ TCP λ μ΄μ–΄μ—μ„ λ°μ΄ν„°κ°€ μ „λ‹¬λμ–΄μ•Ό ν•λ” μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ‹λ³„ν•  μ μκ² ν•λ‹¤.

<br/>

### μ—”λ“ ν¬μΈνΈ
μ—”λ“ ν¬μΈνΈλ” μ•„μ΄ν”Ό μ£Όμ†μ™€ ν¬νΈ λ²νΈμ μ΅°ν•©μ„ μλ―Έν•λ‹¤.  
λ¨λ“  TCP μ—°κ²°μ€ 2 κ°μ μ—”λ“ ν¬μΈνΈλ΅ μ μΌν•κ² μ‹λ³„λμ–΄μ§ μ μλ‹¤.  
λ”°λΌμ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„ μ—¬λ¬ κ°μ μ—°κ²°μ΄ λ§Ίμ–΄μ§ μ μλ‹¤.

<br/>

## μΌλ°μ μΈ Socket ν†µμ‹ μ νλ¦„
![Untitled](https://velog.velcdn.com/images/newdana01/post/817b8ba8-4428-4e66-8128-7c01b554f8ff/image.png)

<br/>

### μ„λ²„(Server)
ν΄λΌμ΄μ–ΈνΈ μ†μΌ“μ μ—°κ²° μ”μ²­μ„ λ€κΈ°ν•κ³ , μ—°κ²° μ”μ²­μ΄ μ¤λ©΄ ν΄λΌμ΄μ–ΈνΈ μ†μΌ“μ„ μƒμ„±ν•μ—¬ ν†µμ‹ μ΄ κ°€λ¥ν•κ² ν•λ‹¤.

<br/>

1. socket() ν•¨μλ¥Ό μ΄μ©ν•μ—¬ μ†μΌ“ μƒμ„±
2. bind() ν•¨μλ΅ ipμ™€ port λ²νΈλ¥Ό μ„¤μ •ν•κ² λλ‹¤.
3. listen() ν•¨μλ΅ ν΄λΌμ΄μ–ΈνΈμ μ ‘κ·Ό μ”μ²­μ— μμ‹  λ€κΈ°μ—΄μ„ λ§λ“¤μ–΄ λ‡ κ°μ ν΄λΌμ΄μ–ΈνΈλ¥Ό λ€κΈ°μ‹ν‚¬μ§€ κ²°μ •
4. accept() ν•¨μλ¥Ό μ‚¬μ©ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ™€μ μ—°κ²°μ„ κΈ°λ‹¤λ¦Ό
    1. λ°μ΄ν„° μ†΅μμ‹ 
    2. μ†μΌ“ λ‹«κΈ°

<br/>

### ν΄λΌμ΄μ–ΈνΈ(Client)
μ‹¤μ λ΅ λ°μ΄ν„° μ†΅μμ‹ μ΄ μΌμ–΄λ‚λ” κ³³μ€ ν΄λΌμ΄μ–ΈνΈ μ†μΌ“μ΄λ‹¤.

<br/>

1. socket() ν•¨μλ΅ κ°€μ¥ λ¨Όμ € μ†μΌ“μ„ μ—°λ‹¤.
2. connect() ν•¨μλ¥Ό μ΄μ©ν•μ—¬ ν†µμ‹ ν•  μ„λ²„μ μ„¤μ •λ ipμ™€ port λ²νΈμ— ν†µμ‹  μ‹λ„
3. ν†µμ‹  μ‹λ„ μ‹, μ„λ²„κ°€ accept() ν•¨μλ¥Ό μ΄μ©ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ socket descriptorλ¥Ό λ°ν™
4. μ΄λ¥Ό ν†µν•΄ ν΄λΌμ΄μ–ΈνΈμ μ„λ²„κ°€ μ„λ΅ read(), write()λ¥Ό ν•λ©° ν†µμ‹  (μ΄ κ³Όμ •μ΄ λ°λ³µλλ‹¤.)
    1. λ°μ΄ν„° μ†΅μμ‹ 
    2. μ†μΌ“ λ‹«κΈ°

<br/>

## Socket μΆ…λ¥
### μ¤νΈλ¦Ό μ†μΌ“(TCP)
- TCP(Transmission Control Protocol)μ„ μ‚¬μ©ν•λ” μ—°κ²° μ§€ν–¥ λ°©μ‹μ μ†μΌ“
- μ†΅μμ‹ μμ μ—°κ²°μ„ λ³΄μ¥ν•μ—¬ μ‹ λΆ°μ„± μλ” λ°μ΄ν„° μ†΅μμ‹ μ΄ κ°€λ¥
- λ°μ΄ν„°μ μμ„ λ³΄μ¥
- μ†λ‰μ λ°μ΄ν„°λ³΄λ‹¤ λ€λ‰ λ°μ΄ν„° μ „μ†΅μ— μ ν•©
- μ λ€μ  μ—°κ²°

<br/>

![Untitled](https://velog.velcdn.com/images/newdana01/post/2999a10d-fe3a-4cd4-bf5f-90c2f777a2e9/image.png)

<br/>

#### μ„λ²„(Server)
- μ†μΌ“ μƒμ„±
- λ°”μΈλ”©
- listen (μ—°κ²°λμ§€ μ•μ€ μ†μΌ“μ„ λ€κΈ° λ¨λ“λ΅ μ „ν™)
- ν΄λΌμ΄μ–ΈνΈ μ”μ²­ μλ½ ν›„ ν†µμ‹ μ„ μ„ν• μ‹¤μ§μ μΈ μ†μΌ“ μƒμ„± (μ²μμ— μƒμ„±ν• μ†μΌ“μ€ μƒλ΅μ΄ ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ λ€κΈ°ν•κΈ° μ„ν•΄ μ“°μ„)
- λ°μ΄ν„° μ†΅μμ‹ 
- μ†μΌ“ λ‹«μ

<br/>

#### ν΄λΌμ΄μ–ΈνΈ(Client)
- μ†μΌ“ μƒμ„±
- μ„λ²„κ°€ μ„¤μ •ν• ip, portλ΅ μ—°κ²°
- accept()λ΅ ν΄λΌμ΄μ–ΈνΈμ socket descriptor λ°ν™
- λ°μ΄ν„° μ†΅μμ‹ 
- μ†μΌ“ λ‹«μ

<br/>

### λ°μ΄ν„°κ·Έλ¨ μ†μΌ“(UDP)
- UDP(User Diagram Protocol)μ„ μ‚¬μ©ν•λ” λΉ„μ—°κ²°ν• μ†μΌ“
- λ°μ΄ν„°μ μμ„μ™€ μ‹ λΆ°μ„±μ„ λ³΄μ¥ν•κΈ° μ–΄λ ¤μ›€
- μ λ€μ λΏλ§ μ•„λ‹λΌ μΌλ€λ‹¤ μ—°κ²°λ„ κ°€λ¥

<br/>

![Untitled](https://velog.velcdn.com/images/newdana01/post/6d60e795-cd8d-4823-a6a0-bca9deb50cbf/image.png)

<br/>

- accept κ³Όμ • μ—†μ΄ μ†μΌ“ μƒμ„± ν›„ λ°”λ΅ λ°μ΄ν„° μ†΅μμ‹ 

<br/>

## HTTP ν†µμ‹ κ³Ό Socket ν†µμ‹ μ μ°¨μ΄
### HTTP ν†µμ‹ 
- ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ΄ μμ„ λ•λ§ μ„λ²„κ°€ μ‘λ‹µ
- JSON, HTML, Image λ“± λ‹¤μ–‘ν• λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›μ„ μ μλ‹¤.
- μ„λ²„κ°€ μ‘λ‹µν• ν›„ μ—°κ²°μ„ λ°”λ΅ μΆ…λ£ν•λ” λ‹¨λ°©ν–¥ ν†µμ‹ μ΄μ§€λ§ Keep Alive μµμ…μ„ μ£Όμ–΄ μΌμ • μ‹κ°„ λ™μ• μ»¤λ„¥μ…μ„ μ μ§€ν•  μ μλ‹¤.
- μ‹¤μ‹κ°„ μ—°κ²°μ΄ μ•„λ‹ λ°μ΄ν„° μ „λ‹¬μ΄ ν•„μ”ν• κ²½μ°μ—λ§ μ”μ²­μ„ λ³΄λ‚΄λ” μƒν™©μ— μ λ¦¬

<br/>

### Socket ν†µμ‹ 
- ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ νΉμ • ν¬νΈλ¥Ό ν†µν•΄ μ–‘λ°©ν–¥ ν†µμ‹ μ„ ν•λ” λ°©μ‹
- λ°μ΄ν„° μ „λ‹¬ ν›„ μ—°κ²°μ΄ λμ–΄μ§€λ” κ²ƒμ΄ μ•„λ‹λΌ κ³„μ†ν•΄μ„ μ—°κ²°μ„ μ μ§€
    - β†’ HTTPμ— λΉ„ν•΄ λ” λ§μ€ λ¦¬μ†μ¤ μ†λ¨
- ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ‹¤μ‹κ°„μΌλ΅ κ³„μ†ν•μ—¬ λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›μ•„μ•Ό ν•λ” κ²½μ°μ— μ λ¦¬
- μ‹¤μ‹κ°„ λ™μμƒ μ¤νΈλ¦¬λ°μ΄λ‚ μ¨λΌμΈ κ²μ„ λ“±μ— μ‚¬μ©

<br/>
<br/>

# π—‚ μ°Έκ³ 
- [μ†μΌ“μ΄λ€? μΆ…λ¥, ν†µμ‹  νλ¦„, HTTPν†µμ‹ κ³Όμ μ°¨μ΄ (velog.io)](https://velog.io/@newdana01/%EC%86%8C%EC%BC%93%EC%9D%B4%EB%9E%80-%EC%A2%85%EB%A5%98-%ED%86%B5%EC%8B%A0-%ED%9D%90%EB%A6%84-HTTP%ED%86%B5%EC%8B%A0%EA%B3%BC%EC%9D%98-%EC%B0%A8%EC%9D%B4)
- [[κΈ°λ³Έ] μ†μΌ“(SOCKET)ν†µμ‹  μ΄λ€? (tistory.com)](https://helloworld-88.tistory.com/215)
- [μ†μΌ“μ΄λ€ λ¬΄μ—‡μΈκ°€? | Engineering Blog by Dale Seo](https://www.daleseo.com/what-is-a-socket/)
